(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{5093:(e,t,s)=>{Promise.resolve().then(s.bind(s,2158))},9951:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});let{API_HOST:a}=s(7443);async function c(){try{let e=await fetch("".concat(a,"/auth/jwt/refresh"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorisation:"Bearer "+window.localStorage.getItem("access")},body:JSON.stringify({refresh:window.localStorage.getItem("refresh")})});if(e.ok)return window.localStorage.setItem("access",(await e.json()).access),!0;throw Error(e.status)}catch(e){return console.log(e),!1}}},7443:(e,t,s)=>{"use strict";s.r(t),s.d(t,{API_HOST:()=>c,APP_HOST:()=>a});let a="http://localhost:3000",c="http://localhost:8000"},2254:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),c=s(5565);function l(){return(0,a.jsx)(c.default,{alt:"B3 logo",width:198,height:60,src:"/LogoFull.svg"})}},2158:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5155),c=s(2115),l=s(7443),n=s(3391),r=s(8943),i=s(3);let o=()=>(0,r.U1)({reducer:{pages:i.Ay}});function u(e){let{children:t}=e,s=(0,c.useRef)(null);return s.current||(s.current=o()),(0,a.jsx)(n.Kq,{store:s.current,children:t})}var d=s(2254),x=s(5360),h=s(8173),f=s.n(h),m=s(5565),p=s(6046);let g=[{id:0,name:"Главная",link:"".concat(l.APP_HOST,"/student/"),image:"/HomeImg"},{id:1,name:"Курсы",link:"".concat(l.APP_HOST,"/student/courses"),image:"/CourseImg"},{id:2,name:"Помощь",link:"".concat(l.APP_HOST,"/student/help"),image:"/Help"}];function w(){let e=(0,x.CU)(),t=(0,c.useRef)(!1);t.current||(e.dispatch((0,i.yd)(-2)),t.current=!0);let s=(0,x.GV)(e=>e.pages.page);return(0,a.jsx)("div",{className:"h-full w-auto relative bg-dark",children:(0,a.jsxs)("nav",{className:"sticky h-fit flex flex-col items-center min-w-[228px] bg-white",children:[(0,a.jsx)("div",{className:"flex w-full justify-center pb-[15px] pt-5 bg-dark",children:(0,a.jsx)(d.A,{})}),(0,a.jsx)(v,{activeId:s,id:1}),g.map(e=>(0,a.jsx)(y,{activeId:s,id:e.id,link:e.link,name:e.name,image:e.image},e.id)),(0,a.jsx)(v,{activeId:s,id:2}),(0,a.jsx)(j,{})]})})}function j(){let[e,t]=(0,c.useState)(!1);return(0,a.jsx)("button",{onClick:function(){window.localStorage.clear(),(0,p.redirect)("".concat(l.APP_HOST,"/auth"))},onMouseOver:()=>t(!0),onMouseLeave:()=>t(!1),className:"flex flex-col items-center w-full h-fit bg-dark",children:(0,a.jsxs)("div",{className:"flex items-center w-full justify-center gap-x-[15px] py-[15px]",children:[(0,a.jsx)(m.default,{alt:"exit",src:"/Exit".concat(e?"Active":"",".svg"),width:30,height:30,className:"stroke-white hover:stroke-[#FF0000] transition-all"}),(0,a.jsx)("span",{className:"transition-all text-left w-[118px] ".concat(e?"text-[#FF0000]":"text-white"," text-xl"),children:"Выйти"})]})})}function v(e){let{activeId:t,id:s}=e;return(0,a.jsx)("div",{className:"flex w-full bg-dark justify-center py-[15px] ".concat(0==t&&1==s&&"rounded-br-[20px]"," ").concat(2==t&&2==s&&"rounded-tr-[20px]"),children:(0,a.jsx)("div",{className:"w-[186px] h-[2px] bg-[#C8CDD0] opacity-20"})})}function y(e){let{activeId:t,id:s,link:c,name:l,image:n}=e;return(0,a.jsx)(f(),{className:"flex flex-col items-center w-full h-fit bg-dark ".concat(t-1==s||t+1==s?t-1==s?"rounded-br-[20px]":"rounded-tr-[20px]":""),href:c,children:(0,a.jsxs)("div",{className:"flex items-center w-full justify-center gap-x-[15px] py-[15px] ".concat(t==s?"bg-white rounded-l-[20px]":"bg-transparent"," "),children:[(0,a.jsx)(m.default,{alt:l,src:"".concat(n).concat(t==s?"Active":"",".svg"),width:30,height:30}),(0,a.jsx)("span",{className:"w-[118px] ".concat(t==s?"text-blue":"text-white"," text-xl"),children:l})]})})}var S=s(9951);function A(){let[e,t]=(0,c.useState)({name:!1,isSuccess:!1});return(0,c.useEffect)(()=>{(async function(){let s="";try{if(!e.name){let e=await fetch("".concat(l.API_HOST,"/auth/users/me/"),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+window.localStorage.getItem("access")}});if(e.ok)t({name:(await e.json()).username,isSuccess:!0});else if(401==e.status)await (0,S.A)()?t({name:null,isSuccess:!1}):s="".concat(l.APP_HOST,"/auth");else throw Error(e.status)}}catch(e){console.log(e),t({name:"",isSuccess:!1})}finally{""!=s&&(0,p.redirect)(s)}})()}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("form",{className:"flex items-center gap-x-2.5",children:[(0,a.jsx)("button",{type:"submit",children:(0,a.jsx)(m.default,{alt:"search",src:"/search.svg",width:30,height:30})}),(0,a.jsx)("input",{className:"w-[120px] py-1 px-1 border-none placeholder:text-xl placeholder:text-dark",placeholder:"Поиск..."})]}),(0,a.jsxs)("div",{className:"flex gap-x-5 items-center",children:[e.isSuccess&&(0,a.jsx)("p",{className:"text-xl text-dark",children:e.name}),(0,a.jsx)(m.default,{alt:"Avatar",src:"/UserDefAvatar.svg",width:60,height:60})]})]})}function N(e){let{children:t}=e,[s,n]=(0,c.useState)({name:null,isSuccess:!1,isLoad:!1});return((0,c.useEffect)(()=>{(async function(){if(!s.isLoad){let e="";try{let t=await fetch("".concat(l.API_HOST,"/auth/users/me"),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+window.localStorage.getItem("access")}});if(t.ok)n({name:(await t.json()).name,isSuccess:!0,isLoad:!0});else if(401==t.status)await (0,S.A)()?n({name:null,isSuccess:!1,isLoad:!1}):e="".concat(l.APP_HOST,"/auth");else throw Error(t.status)}catch(e){console.log(e),n({name:s.name,isSuccess:!1,isLoad:!0})}finally{""!=e&&(0,p.redirect)(e)}}})()}),s.isSuccess)?(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"w-full flex p-5",children:[(0,a.jsx)(w,{}),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-y-[30px] py-5 px-10 rounded-[40px] bg-white",children:[(0,a.jsx)(A,{}),(0,a.jsx)(b,{}),t]})]})}):(0,a.jsx)(a.Fragment,{})}function b(){return(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)("div",{className:"w-full h-[2px] bg-[#C8CDD0] opacity-50"})})}},5360:(e,t,s)=>{"use strict";s.d(t,{CU:()=>n,GV:()=>l,jL:()=>c});var a=s(3391);let c=a.wA,l=a.d4,n=a.Pj},3:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>l,yd:()=>c});let a=(0,s(8943).Z0)({name:"pages",initialState:{page:-2},reducers:{changePage(e,t){e.value!=t.payload&&(e.page=t.payload)}}}),{changePage:c}=a.actions,l=a.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[738,173,505,441,517,358],()=>t(5093)),_N_E=e.O()}]);